<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Your website description" />
    <title>Dub Analytics</title>
  </head>
  <body>
    <script>
      !(function (w, da) {
        w[da] =
          w[da] ||
          function () {
            (w[da].q = w[da].q || []).push(arguments);
          };

        ['trackClick'].forEach(function (m) {
          w[da][m] = function () {
            w[da](m, ...arguments);
          };
        });
      })(window, 'dubAnalytics');

      dubAnalytics('ready', function () {
        if (DubAnalytics.partner) {
          console.log('Partner', JSON.stringify(DubAnalytics.partner));
        }
      });

      setTimeout(() => {
        dubAnalytics.trackClick({
          domain: 'getacme.link',
          key: 'derek',
        });
      }, 3000);

      console.log('dubAnalytics from html', window.dubAnalytics.q.length);
    </script>

    <script
      defer
      src="http://[::]:8000/src/base.js"
      data-short-domain="getacme.link"
    ></script>

    <header>
      <h1>Dub Analytics</h1>
    </header>

    <main>
      <p>Your content goes here</p>
    </main>
  </body>
</html>
